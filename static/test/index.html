<!DOCTYPE html>
<html>
<head>
  <!--base href="https://demos.telerik.com/kendo-ui/grid/index"-->
  <style>
    html {
      font-size: 14px;
      font-family: Arial, Helvetica, sans-serif;
    }
  </style>
  <title></title>
  <link rel="stylesheet" href="http://localhost:8888/static/js/kendo-ui/styles/kendo.common-material.min.css" />
  <link rel="stylesheet" href="http://localhost:8888/static/js/kendo-ui/styles/kendo.material.min.css" />
  <link rel="stylesheet" href="http://localhost:8888/static/js/kendo-ui/styles/kendo.material.mobile.min.css" />
  <style>
    .k-content {
      width: 500px;
    }
    input[type=text], .k-multiselect-wrap, .k-textbox, .k-numerictextbox, .k-combobox {
      width: 100%;
      padding: 5px 5px;
      margin: 10px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    input[type=text], .k-multiselect-wrap, .k-textbox, .k-numerictextbox, .k-combobox, .k-dropdown {
      width: 100%;
      padding: 5px 5px;
      margin: 10px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .k-multiselect.k-header, .k-switch.k-header, .k-dropdown {
      border-color: #ffffff;
      background: #ffffff;
    }

    .k-multiselect.k-header.k-state-focused, .k-dropdown {
      background-color: #ffffff;
    }

    .k-switch, .km-switch {
      margin: 5px 0;
      display: block;
    }
  </style>
  <script src="http://localhost:8888/static/js/kendo-ui/js/jquery.min.js"></script>
  <script src="http://localhost:8888/static/js/kendo-ui/js/kendo.all.min.js"></script>
  <script id="autoId_3BUmssI5c7Z0So4a2J6WGXuZA9J08Fpb" type="text/x-kendo-template"><div id="autoId_34FJaEWIwbxiQB9lupxnjpUVR98mAiSV">No data found. Do you want to add new item?</div><br><br><button class="k-button" id="autoId_yMdJvrge6yhUULItBns3q54iQ4Aen2QH" onclick="addNewItemToKendoDataSource('id:#: instance.element[0].id #')">Add new item</button></script>
  <script>
    var ConfigExposedPortsWidget;
    var ConfigExposedPortsDataSource;
    function ConfigExposedPortsAddButton() {
      if( $('#ConfigExposedPortsDialogContent').kendoValidator().data('kendoValidator').validate() == false ){
        return false;
      }
      ConfigExposedPortsDataSource.add({
        'ExposedPortsShow': getFormValue('id:ExposedPortsShow'),
        'ExposedPortsNumber': getFormValue('id:ExposedPortsNumber'),
        'ExposedPortsProtocol': getFormValue('id:ExposedPortsProtocol'),
      });
      ConfigExposedPortsDataSource.one('requestEnd', function (args) {
        if (args.type !== 'create') {
          return;
        }
        var newValue = args.response.Objects[ 0 ].id
        ConfigExposedPortsDataSource.one('sync', function () {
          ConfigExposedPortsWidget.value(ConfigExposedPortsWidget.value().concat([newValue]));
        });
      });
      ConfigExposedPortsDataSource.sync();
      return false;
    }
    function ConfigExposedPortsAddAndCloseButton() {
      if( $('#ConfigExposedPortsDialogContent').kendoValidator().data('kendoValidator').validate() == false ){
        return false;
      }
      ConfigExposedPortsDataSource.add({
        'ExposedPortsShow': getFormValue('id:ExposedPortsShow'),
        'ExposedPortsNumber': getFormValue('id:ExposedPortsNumber'),
        'ExposedPortsProtocol': getFormValue('id:ExposedPortsProtocol'),
      });
      ConfigExposedPortsDataSource.one('requestEnd', function (args) {
        if (args.type !== 'create') {
          return;
        }
        var newValue = args.response.Objects[ 0 ].id
        ConfigExposedPortsDataSource.one('sync', function () {
          ConfigExposedPortsWidget.value(ConfigExposedPortsWidget.value().concat([newValue]));
        });
      });
      ConfigExposedPortsDataSource.sync();
      ConfigExposedPortsWidget.close();
    }
    function addNewItemToKendoDataSource( id ){
      console.log('id: ', id);
      switch( id ){
        case 'id:ConfigExposedPorts': $('#autoId_xjroq0WN7BMNDqLmjwGK0dEzXwuFEPFr').data('kendoDialog').open();
          $("#ExposedPortsNumber").kendoNumericTextBox({format: "#",});
          $("#ExposedPortsProtocol").kendoComboBox({});
          break;
      }
    }
    function getFormValue( id ){
      switch( id ){
        case 'id:HostName': return $('#ConfigHostName').val();
        case 'id:DomainName': return $('#ConfigDomainName').val();
        case 'id:User': return $('#ConfigUser').val();
        case 'id:AttachStdIn': return $('#ConfigAttachStdIn').data('kendoDropDownList').value();
        case 'id:AttachStdOut': return $('#ConfigAttachStdOut').val();
        case 'id:AttachStdErr': return $('#ConfigAttachStdErr').val();
        case 'id:ExposedPorts': return $('#ConfigExposedPorts').data('kendoMultiSelect').value();
        case 'id:ExposedPortsShow': return $('#ExposedPortsShow').val();
        case 'id:ExposedPortsNumber': return $('#ExposedPortsNumber').data('kendoNumericTextBox').value();
        case 'id:ExposedPortsProtocol': return $('#ExposedPortsProtocol').data('kendoComboBox').value();
        case 'id:Try': return $('#ConfigTry').val();
        case 'id:OpenStdIn': return $('#ConfigOpenStdIn').val();
        case 'id:StdInOnce': return $('#ConfigStdInOnce').val();
        case 'id:Env': return $('#ConfigEnv').data('kendoMultiSelect').value();
        case 'id:Cmd': return $('#ConfigCmd').data('kendoMultiSelect').value();
        case 'id:ArgsEscaped': return $('#ConfigArgsEscaped').val();
        case 'id:Image': return $('#ConfigHostImage').data('kendoAutoComplete').value();
        case 'id:Volumes': return $('#ConfigVolumes').data('kendoMultiSelect').value();
        case 'id:WorkingDir': return $('#ConfigWorkingDir').val();
        case 'id:EntryPoint': return $('#ConfigEntryPoint').data('kendoMultiSelect').value();
        case 'id:NetworkDisabled': return $('#ConfigNetworkDisabled').val();
        case 'id:MacAddress': return $('#ConfigMacAddress').val();
        case 'id:OnBuild': return $('#ConfigOnBuild').data('kendoMultiSelect').value();
        case 'id:Labels': return $('#ConfigLabels').data('kendoMultiSelect').value();
        case 'id:StopSignal': return $('#ConfigStopSignal').val();
        case 'id:StopTimeout': return $('#ConfigStopTimeout').data('kendoNumericTextBox').value();
        case 'id:Shell': return $('#ConfigShell').data('kendoMultiSelect').value();
      }
    }

    $(document).ready(function () {
      $("#ConfigHostName").addClass('k-textbox');
      $("#ConfigDomainName").addClass('k-textbox');
      $("#ConfigUser").addClass('k-textbox');
      $("#ConfigAttachStdIn").kendoDropDownList({dataSource: [{"key": -1,"value": "Default",},{"key": 0,"value": "No",},{"key": 1,"value": "Yes",},],dataTextField: "value",dataValueField: "key",});
      $("#ConfigAttachStdOut").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
      $("#ConfigAttachStdErr").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
      $("#ConfigExposedPorts").kendoMultiSelect({clearButton: false,dataSource:  new kendo.data.DataSource({schema: {data: "Objects",model: {id: "id",fields: {"id": {type: "number",}, "ExposedPortsNumber": {type: "number",}, "ExposedPortsProtocol": {type: "string",}, "ExposedPortsShow": {type: "string",}, },},total: "Total",},serverPaging: true,transport: { create: { dataType: "json",type: "POST",url: "/static/test/create",},read: { dataType: "json",type: "GET",url: "/static/test/read",},},}),dataTextField: "ExposedPortsShow",dataValueField: "id",noDataTemplate: $("#autoId_3BUmssI5c7Z0So4a2J6WGXuZA9J08Fpb").html(),});
      $("#autoId_xjroq0WN7BMNDqLmjwGK0dEzXwuFEPFr").kendoDialog({actions: [{text: "-Close",primary: false,},{text: "-Add",action: ConfigExposedPortsAddButton,primary: false,},{text: "-Add and close",action: ConfigExposedPortsAddAndCloseButton,primary: true,},],content: ' <div class="k-content" id="ConfigExposedPortsDialogContent"><div id="autoId_VuqjdwUDPWG0vtW6RD3xH2s0NEZOhRmz"><label id="autoId_Okpj5M9ky1juhz10bBruBseI45ZLGgQS" for="ExposedPortsNumber">Port number</label><input type="number" class="oneThirdSize" id="ExposedPortsNumber" validationMessage="Enter a {0}" name="ExposedPortsNumber" autocomplete="off" required></div><div id="autoId_Y7wrxZXglKFihR7OexurgH8T0MiuNytP"><label id="autoId_S3ZMdxKUpqe1v4AsorBySuBgYx9DadgJ" for="ExposedPortsProtocol">Port protocol</label><select class="oneThirdSize" data-required-msg="Select start time" id="ExposedPortsProtocol" name="ExposedPortsProtocol" required><option value="">Please, select one</option><option value="TCP">TCP</option><option value="UDP">UDP</option></select></div><input type="hidden" id="ExposedPortsShow" name="ExposedPortsShow"></div>',title: "Add new exposed port.",visible: false,width: 400,});
      ConfigExposedPortsWidget = $('#ConfigExposedPorts').getKendoMultiSelect();
      ConfigExposedPortsDataSource = ConfigExposedPortsWidget.dataSource;
      $("#ConfigTry").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
      $("#ConfigOpenStdIn").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
      $("#ConfigStdInOnce").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
      $("#ConfigEnv").kendoMultiSelect({});
      $("#ConfigCmd").kendoMultiSelect({});
      $("#ConfigArgsEscaped").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
      $("#ConfigHostImage").kendoAutoComplete({dataSource:  new kendo.data.DataSource({schema: {data: "Objects",model: {id: "id",fields: {"ExposedPortsShow": {type: "string",}, "id": {type: "number",}, "ExposedPortsNumber": {type: "number",}, "ExposedPortsProtocol": {type: "string",}, },},total: "Total",},serverPaging: true,transport: { create: { dataType: "json",type: "POST",url: "/static/test/create",},read: { dataType: "json",type: "GET",url: "/static/test/read",},},}),clearButton: false,dataTextField: "ExposedPortsShow",});
      $("#ConfigVolumes").kendoMultiSelect({});
      $("#ConfigWorkingDir").addClass('k-textbox');
      $("#ConfigEntryPoint").kendoMultiSelect({});
      $("#ConfigNetworkDisabled").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
      $("#ConfigMacAddress").addClass('k-textbox');
      $("#ConfigOnBuild").kendoMultiSelect({});
      $("#ConfigLabels").kendoMultiSelect({});
      $("#ConfigStopSignal").addClass('k-textbox');
      $("#ConfigStopTimeout").kendoNumericTextBox({format: "#s",});
      $("#ConfigShell").kendoMultiSelect({});
      ConfigExposedPortsWidget = $('#ConfigExposedPorts').getKendoMultiSelect();
      ConfigExposedPortsDataSource = ConfigExposedPortsWidget.dataSource;

    });

    function getData(){
      var ConfigExposedPorts = [];

      var data = ConfigExposedPortsDataSource.data();
      var value = getFormValue( 'id:ExposedPorts' );

      for( var kValue in value ){
        if( !value.hasOwnProperty( kValue ) ){
          continue;
        }

        for( var kData in data ){
          if( !data.hasOwnProperty( kData ) ){
            continue;
          }

          if( data[ kData ].id === value[ kValue ] ){
            ConfigExposedPorts.push( data[ kData ] );
          }

        }
      }

      console.log( 'ConfigHostName:', getFormValue( 'id:HostName' ) );
      console.log( 'data to send:', ConfigExposedPorts );
      console.log( 'data to send:', ConfigExposedPorts );
    }
  </script>
</head>
<body>
<div id="example">
  <div class="k-content" id="spanCreateTemplateExposedPortsAddNewPort" style="width: 300px !important;"><div id="autoId_p1u3uGyormAf7hZGqHEvucrYUd3p6z7p"><label id="autoId_7F99RPqUV20JL7VZjThhJ0ImjfflVeuG" style="width: 200px important!;" for="ConfigHostName">Host Name</label><input type="text" class="k-textbox" id="ConfigHostName" name="HostName"></div><div id="autoId_BEM5y18cB9KNyu8COzSoNuyaYgtqfRDU"><label id="autoId_A0cfrQSlAkxRyLnP1RqBLqTCMzeClDl6" for="ConfigDomainName">Domain Name</label><input type="text" class="k-textbox" id="ConfigDomainName" name="DomainName"></div><div id="autoId_JG0PmeCJNTRUpmuxoaYcQZXg4ANEriWc"><label id="autoId_zDPEJ1cud44EWUvyaFQd66DhSjqmnxHX" for="ConfigUser">User</label><input type="text" class="k-textbox" id="ConfigUser" name="User"></div><div id="autoId_TkPSggFuTYDHshDCs8A8L5B3j0Gg1fhz"><label id="autoId_ztQ0fn3MnVUx83QPdm5gux7CpTBF8mpO" for="ConfigAttachStdIn">Attach Std In</label><input type="text" id="ConfigAttachStdIn" name="AttachStdIn"></div><div id="autoId_bk0snFu2hKRMFK36LgDt0X62L4h95MFA"><label id="autoId_FAE0HLyr90Le3JGZAkclYOHMtLydvSiI" for="ConfigAttachStdOut">Attach Std Out</label><input type="checkbox" id="ConfigAttachStdOut" name="AttachStdOut"></div><div id="autoId_WunqAaW2Lsa0hDf5PlCq0ku0sdinRVkt"><label id="autoId_M4O9mx8szATXEP1Kf7KaiWeDIVO1t42d" for="ConfigAttachStdErr">Host Attach Std Err</label><input type="checkbox" id="ConfigAttachStdErr" name="AttachStdErr"></div><div id="autoId_eL2HShiWyAyWPcEbCFsGBE43IjIMmFnS"><label id="autoId_8qIguU3TD9jvcYBnoPv5zC8ToB6etBol" for="ConfigExposedPorts">Exposed Ports</label><select id="ConfigExposedPorts" name="ExposedPorts"></select><div id="autoId_xjroq0WN7BMNDqLmjwGK0dEzXwuFEPFr"></div></div><div id="autoId_sGdOISEXgdr4LlJZ0fxZ500jrOa1N01n"><label id="autoId_UHhEttxePPN2yLbW2rQmZyaDdcy0diru" for="ConfigTry">Try</label><input type="checkbox" id="ConfigTry" name="Try"></div><div id="autoId_XqwYSsFvsxaG3X0rftErKqcnX5lkQjqO"><label id="autoId_36x1fU1fCg0nO1nKYYQJwCul3fkoBlll" for="ConfigOpenStdIn">Open Std In</label><input type="checkbox" id="ConfigOpenStdIn" name="OpenStdIn"></div><div id="autoId_SoXfGvwW0yCT7T0wXlQ3I2eKoHTb4obu"><label id="autoId_T7cWVwyLlQjftFoy1dn9aBkStpNMjz4X" for="ConfigStdInOnce">Std In Once</label><input type="checkbox" id="ConfigStdInOnce" name="StdInOnce"></div><div id="autoId_fd5pOxEZtHroWdQ0WmSyHprpZBLgZ9J4"><label id="autoId_GbxOuwGsZgX47k60fPCjBQTRZUmnbDF2" for="ConfigEnv">Env</label><select id="ConfigEnv" name="Env"></select></div><div id="autoId_kqTNKeMy1JhuPHef3G5N2qhdklEAxXfg"><label id="autoId_v8VJ2xxC28vnd6vcoHJVseAoFph38hMy" for="ConfigCmd">Cmd</label><select id="ConfigCmd" name="Cmd"></select></div><div id="autoId_pHWob2Sbu7EhKwGs0AtqUjynCHHo4xHT"><label id="autoId_BT9JwcKU0ozBsjJHJs17THNa48mZsVnM" for="ConfigHealthCheck">Health Check</label></div><div id="autoId_1DVWUmeI6NCfghYpyKsgCDXJCq2y3mx0"><label id="autoId_ELD1y3Ukh6joJUhKAmq0HQn8CtPbPY6U" for="ConfigArgsEscaped">Args Escaped</label><input type="checkbox" id="ConfigArgsEscaped" name="ArgsEscaped"></div><div id="autoId_Xs2VKwShF5uFlNou8hmQ1k9XAPJM64Kz"><label id="autoId_r0Aiyte3GXrRJ43mf6svZOwZw8sDOeEH" for="ConfigImage">Image</label><input type="text" class="k-textbox" id="ConfigHostImage" name="Image"></div><div id="autoId_UTOOGz7feGER22dIWTo2wNIhiFyAlFKj"><label id="autoId_OSdMS90DEI6iB0WHJNDjbTp6KyKIRqMs" for="ConfigVolumes">Volumes</label><select id="ConfigVolumes" name="Volumes"></select></div><div id="autoId_qUO2DlV1nNKkOzu0bKzkP9J4Dq0YJZIW"><label id="autoId_W2e16l5EqRAiAAkGZZF4xlmZw8ecBgxt" for="ConfigWorkingDir">Working Dir</label><input type="text" class="k-textbox" id="ConfigWorkingDir" name="WorkingDir"></div><div id="autoId_dPWipgMrOEXIzuHf2HOKhSOhIsCDnyBL"><label id="autoId_DSx9x6Wd7DUSk3DAq73agzeEcrdYx0w8" for="ConfigEntryPoint">EntryPoint</label><select id="ConfigEntryPoint" name="EntryPoint"></select></div><div id="autoId_FWawUyUOdAGr10vRFB1on2HIlOiVPuY4"><label id="autoId_GSkTbk6Zj1wFv4nxI7198B1rAoYk3LoK" for="ConfigNetworkDisabled">Network Disabled</label><input type="checkbox" id="ConfigNetworkDisabled" name="NetworkDisabled"></div><div id="autoId_ihScRmnFCDaL71DuJ6SMdPenvSiOgTNh"><label id="autoId_KR80o0C1PzTjCZFutvfK00nX5cPUhaTr" for="ConfigMacAddress">Mac Address</label><input type="text" class="k-textbox" id="ConfigMacAddress" name="MacAddress"></div><div id="autoId_H6rWEIabcxsETMgR6T3dIl1KKA0KOipD"><label id="autoId_eVn8oqwADJIPuM2ysRE5fcpeNUhY5DHF" for="ConfigOnBuild">On Build</label><select id="ConfigOnBuild" name="OnBuild"></select></div><div id="autoId_DHwwqUMeXSlf8WjJ1LxcmPseGUxVQbQU"><label id="autoId_KNWNCYU9bbA0YSOobX8ghTinLERNdRK2" for="ConfigLabels">Labels</label><select id="ConfigLabels" name="Labels"></select></div><div id="autoId_jpFmdPgdSBTw75u3owSS1xwNLooZbcAm"><label id="autoId_ipkJypABiLTn0BIjDZXLjZUyc9opPQ1Q" for="ConfigStopSignal">Stop Signal</label><input type="text" class="k-textbox" id="ConfigStopSignal" name="StopSignal"></div><div id="autoId_89Yo0PJ7kHAx28lNUxhoR4kQYfDNx1Kq"><label id="autoId_NAOp6VVKiPkroudLoWxWalL0Fl0NaclU" for="ConfigStopTimeout">Stop Timeout</label><input type="number" id="ConfigStopTimeout" name="StopTimeout"></div><div id="autoId_rUBC142TJmRnL9kWmZqdzYuv0uZ5JmgY"><label id="autoId_AHvwCCr4gegPCQRbltMJKUyC510Th3TG" for="ConfigShell">Shell</label><select id="ConfigShell" name="Shell"></select></div></div>
</div>
</body>
</html>
<script>
  var inData = {
    "root":[ "key_1", "key_2" ],
    "objects": {
      "key": "out_3",
      "value": [ "key_3", "key_4" ]
    },
    "types": {
      "key_1": {
        "type": "String",
        "value": "id:um",
        "key": "out_1"
      },
      "key_2": {
        "type": "Number",
        "value": "id:dois",
        "key": "out_2"
      },
      "key_3": {
        "type": "Object",
        "value": "id:tres",
        "key": "out_3"
      },
      "key_4": {
        "type": "Object",
        "value": "id:quatro",
        "key": "out_4"
      }
    }
  };

  var Parser = function(){
    this.outData = {};
    this.rule = {};
  };
  Parser.prototype.addRule = function( rule ){
    this.rule = rule;
  };
  Parser.prototype.run = function(){
    for(var i in this.rule["root"] ){
      var el = this.rule["root"][i];
      var data = this.rule["types"][el];
      var value = getFormValue( data["value"] );
      var key = data["key"];
      var type = data["type"];
      switch(type){
        case "String":
          this.outData[ key ] = String( value );
          break;
        case "Number":
          this.outData[ key ] = Number( value );
          break;
        case "Object":
          this.outData[ key ] = {};
          break;
      }
    }
  };

  $('#out').text(JSON.stringify(out));

</script>



















































































