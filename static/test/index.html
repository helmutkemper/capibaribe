<!DOCTYPE html>
<html>
  <head>
    <base href="http://localhost:8888/static/">
    <style>
      html {
        font-size: 14px;
        font-family: Arial, Helvetica, sans-serif;
      }
    </style>
    <title></title>
    <link rel="stylesheet" href="js/kendo-ui/styles/kendo.common-material.min.css" />
    <link rel="stylesheet" href="js/kendo-ui/styles/kendo.material.min.css" />
    <link rel="stylesheet" href="js/kendo-ui/styles/kendo.material.mobile.min.css" />
    <script src="js/kendo-ui/js/jquery.min.js"></script>
    <script src="js/kendo-ui/js/kendo.all.min.js"></script>
    <script src="js/fuse.min.js"></script>
    <style>
      .k-content {
        width: 500px;
      }
      input[type=text], .k-multiselect-wrap, .k-textbox, .k-numerictextbox, .k-combobox, .k-dropdown {
        width: 100%;
        padding: 5px 5px;
        margin: 10px 0;
        display: inline-block;
        background: #fafafa;
        box-sizing: border-box;
      }

      .k-multiselect.k-header, .k-switch.k-header, .k-dropdown {
        border-color: #ffffff;
        background: #ffffff;
      }

      .k-multiselect.k-header.k-state-focused, .k-dropdown {
        background-color: #ffffff;
      }

      .k-switch, .km-switch {
        margin: 5px 0;
        display: block;
      }
    </style>
    <script id="autoId_dQWycEEvAuypdZrPvkBGnpTccmn290qs" type="text/x-kendo-template"><div id="autoId_0OSjvJRyqimuS523huP23hTyLFpHsOub">No data found. Do you want to add new item?</div><br><br><button class="k-button" id="autoId_ftrLbv0i8rrA41cZv40g6NmhVikFXNsu" onclick="addNewItemToKendoDataSource('id:#: instance.element[0].id #')">Add new item</button></script>
    <script>
      var fuzzyData =   [
        {
          title: "Old Man's War",
          author: {
            firstName: "John",
            lastName: "Scalzi"
          }
        },
        {
          title: "The Lock Artist",
          author: {
            firstName: "Steve",
            lastName: "Hamilton"
          }
        },
        {
          title: "HTML5",
          author: {
            firstName: "Remy",
            lastName: "Sharp"
          }
        },
        {
          title: "Right Ho Jeeves",
          author: {
            firstName: "P.D",
            lastName: "Woodhouse"
          }
        },
        {
          title: "The Code of the Wooster",
          author: {
            firstName: "P.D",
            lastName: "Woodhouse"
          }
        },
        {
          title: "Thank You Jeeves",
          author: {
            firstName: "P.D",
            lastName: "Woodhouse"
          }
        },
        {
          title: "The DaVinci Code",
          author: {
            firstName: "Dan",
            lastName: "Brown"
          }
        },
        {
          title: "Angels & Demons",
          author: {
            firstName: "Dan",
            lastName: "Brown"
          }
        },
        {
          title: "The Silmarillion",
          author: {
            firstName: "J.R.R",
            lastName: "Tolkien"
          }
        },
        {
          title: "Syrup",
          author: {
            firstName: "Max",
            lastName: "Barry"
          }
        },
        {
          title: "The Lost Symbol",
          author: {
            firstName: "Dan",
            lastName: "Brown"
          }
        },
        {
          title: "The Book of Lies",
          author: {
            firstName: "Brad",
            lastName: "Meltzer"
          }
        },
        {
          title: "Lamb",
          author: {
            firstName: "Christopher",
            lastName: "Moore"
          }
        },
        {
          title: "Fool",
          author: {
            firstName: "Christopher",
            lastName: "Moore"
          }
        },
        {
          title: "Incompetence",
          author: {
            firstName: "Rob",
            lastName: "Grant"
          }
        },
        {
          title: "Fat",
          author: {
            firstName: "Rob",
            lastName: "Grant"
          }
        },
        {
          title: "Colony",
          author: {
            firstName: "Rob",
            lastName: "Grant"
          }
        },
        {
          title: "Backwards, Red Dwarf",
          author: {
            firstName: "Rob",
            lastName: "Grant"
          }
        },
        {
          title: "The Grand Design",
          author: {
            firstName: "Stephen",
            lastName: "Hawking"
          }
        },
        {
          title: "The Book of Samson",
          author: {
            firstName: "David",
            lastName: "Maine"
          }
        },
        {
          title: "The Preservationist",
          author: {
            firstName: "David",
            lastName: "Maine"
          }
        },
        {
          title: "Fallen",
          author: {
            firstName: "David",
            lastName: "Maine"
          }
        },
        {
          title: "Monster 1959",
          author: {
            firstName: "David",
            lastName: "Maine"
          }
        }
      ];

      var options = {
        shouldSort: true,
        threshold: 0.6,
        location: 0,
        distance: 50,
        maxPatternLength: 32,
        minMatchCharLength: 2,
        keys: [
          "title",
          "author.firstName"
        ]
      };
      var fuse = new Fuse(fuzzyData, options); // "list" is the item array

    </script>
    <script>
      var ConfigExposedPortsWidget;
      var ConfigExposedPortsDataSource;
      function ConfigExposedPortsAddButton() {
        if( $('#ConfigExposedPortsDialogContent').kendoValidator().data('kendoValidator').validate() == false ){
          return false;
        }
        ConfigExposedPortsDataSource.add({
          'ExposedPortsShow': getFormValue('id:ExposedPortsShow'),
          'ExposedPortsNumber': getFormValue('id:ExposedPortsNumber'),
          'ExposedPortsProtocol': getFormValue('id:ExposedPortsProtocol'),
        });
        ConfigExposedPortsDataSource.one('requestEnd', function (args) {
          if (args.type !== 'create') {
            return;
          }
          var newValue = args.response.Objects[ 0 ].id
          ConfigExposedPortsDataSource.one('sync', function () {
            ConfigExposedPortsWidget.value(ConfigExposedPortsWidget.value().concat([newValue]));
          });
        });
        ConfigExposedPortsDataSource.sync();
        return false;
      }
      function ConfigExposedPortsAddAndCloseButton() {
        if( $('#ConfigExposedPortsDialogContent').kendoValidator().data('kendoValidator').validate() == false ){
          return false;
        }
        ConfigExposedPortsDataSource.add({
          'ExposedPortsShow': getFormValue('id:ExposedPortsShow'),
          'ExposedPortsNumber': getFormValue('id:ExposedPortsNumber'),
          'ExposedPortsProtocol': getFormValue('id:ExposedPortsProtocol'),
        });
        ConfigExposedPortsDataSource.one('requestEnd', function (args) {
          if (args.type !== 'create') {
            return;
          }
          var newValue = args.response.Objects[ 0 ].id
          ConfigExposedPortsDataSource.one('sync', function () {
            ConfigExposedPortsWidget.value(ConfigExposedPortsWidget.value().concat([newValue]));
          });
        });
        ConfigExposedPortsDataSource.sync();
        ConfigExposedPortsWidget.close();
      }
      function addNewItemToKendoDataSource( id ){
        console.log('id: ', id);
        switch( id ){
          case 'id:ConfigExposedPorts': $('#autoId_qAUmbDQyCARWbdAFxBDLgHgYtwPJDjTn').data('kendoDialog').open();
            $("#ExposedPortsNumber").kendoNumericTextBox({format: "#",});
            $("#ExposedPortsProtocol").kendoComboBox({});
            break;
        }
      }
      function getFormValue( id ){
        //try {
          switch (id) {
            case 'id:HostName':
              return $('#ConfigHostName').val();
            case 'id:DomainName':
              return $('#ConfigDomainName').val();
            case 'id:User':
              return $('#ConfigUser').val();
            case 'id:AttachStdIn':
              return $('#ConfigAttachStdIn').data('kendoDropDownList').value();
            case 'id:AttachStdOut':
              return $('#ConfigAttachStdOut').val();
            case 'id:AttachStdErr':
              return $('#ConfigAttachStdErr').val();
            case 'id:ExposedPorts':
              return $('#ConfigExposedPorts').data('kendoMultiSelect').value();
            case 'id:ExposedPortsShow':
              return $('#ExposedPortsShow').val();
            case 'id:ExposedPortsNumber':
              return $('#ExposedPortsNumber').data('kendoNumericTextBox').value();
            case 'id:ExposedPortsProtocol':
              return $('#ExposedPortsProtocol').data('kendoComboBox').value();
            case 'id:Try':
              return $('#ConfigTry').val();
            case 'id:OpenStdIn':
              return $('#ConfigOpenStdIn').val();
            case 'id:StdInOnce':
              return $('#ConfigStdInOnce').val();
            case 'id:Env':
              return $('#ConfigEnv').data('kendoMultiSelect').value();
            case 'id:Cmd':
              return $('#ConfigCmd').data('kendoMultiSelect').value();
            case 'id:ArgsEscaped':
              return $('#ConfigArgsEscaped').val();
            case 'id:Image':
              return $('#ConfigHostImage').data('kendoAutoComplete').value();
            case 'id:Volumes':
              return $('#ConfigVolumes').data('kendoMultiSelect').value();
            case 'id:WorkingDir':
              return $('#ConfigWorkingDir').val();
            case 'id:EntryPoint':
              return $('#ConfigEntryPoint').data('kendoMultiSelect').value();
            case 'id:NetworkDisabled':
              return $('#ConfigNetworkDisabled').val();
            case 'id:MacAddress':
              return $('#ConfigMacAddress').val();
            case 'id:OnBuild':
              return $('#ConfigOnBuild').data('kendoMultiSelect').value();
            case 'id:Labels':
              return $('#ConfigLabels').data('kendoMultiSelect').value();
            case 'id:StopSignal':
              return $('#ConfigStopSignal').val();
            case 'id:StopTimeout':
              return $('#ConfigStopTimeout').data('kendoNumericTextBox').value();
            case 'id:Shell':
              return $('#ConfigShell').data('kendoMultiSelect').value();
          }
        //} catch (e) {
        //  return undefined
        //}
      }

      $(document).ready(function () {
        $("#ConfigHostName").addClass('k-textbox');
        $("#ConfigDomainName").addClass('k-textbox');
        $("#ConfigUser").addClass('k-textbox');
        $("#ConfigAttachStdIn").kendoDropDownList({dataSource: [{"key": -1,"value": "Default",},{"key": 0,"value": "No",},{"key": 1,"value": "Yes",},],dataTextField: "value",dataValueField: "key",});
        $("#ConfigAttachStdOut").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
        $("#ConfigAttachStdErr").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
        $("#ConfigExposedPorts").kendoMultiSelect({clearButton: false,dataSource:  new kendo.data.DataSource({schema: {data: "Objects",model: {id: "id",fields: {"id": {type: "number",}, "ExposedPortsNumber": {type: "number",}, "ExposedPortsProtocol": {type: "string",}, "ExposedPortsShow": {type: "string",}, },},total: "Total",},serverPaging: true,transport: { create: { dataType: "json",type: "POST",url: "/static/test/create",},read: { dataType: "json",type: "GET",url: "/static/test/read",},},}),dataTextField: "ExposedPortsShow",dataValueField: "id",noDataTemplate: $("#autoId_dQWycEEvAuypdZrPvkBGnpTccmn290qs").html(),});
        $("#autoId_qAUmbDQyCARWbdAFxBDLgHgYtwPJDjTn").kendoDialog({actions: [{text: "Close",primary: false,},{text: "Add",action: ConfigExposedPortsAddButton,primary: false,},{text: "Add and close",action: ConfigExposedPortsAddAndCloseButton,primary: true,},],content: ' <div id="ConfigExposedPortsDialogContent"><div id="autoId_bWgZOMl06cEeb0F51S3WhnW7v1SR0JP0"><label id="autoId_WAtTiZX4eNCHtP0N4265MbhklDCQjcyu" for="ExposedPortsNumber">Port number</label><input type="number" class="oneThirdSize" id="ExposedPortsNumber" validationMessage="Enter a {0}" name="ExposedPortsNumber" autocomplete="off" required></div><div id="autoId_ZucJsU17lwKZhPyshBtVwohUSFYAO9Rk"><label id="autoId_pnaoQ3r8qG4cj8KP0rKSvzFya0qEHL0T" for="ExposedPortsProtocol">Port protocol</label><select class="oneThirdSize" data-required-msg="Select start time" id="ExposedPortsProtocol" name="ExposedPortsProtocol" required><option value="">Please, select one</option><option value="TCP">TCP</option><option value="UDP">UDP</option></select></div><input type="hidden" id="ExposedPortsShow" name="ExposedPortsShow"></div>',title: "Add new port.",visible: false,width: 400,});
        ConfigExposedPortsWidget = $('#ConfigExposedPorts').getKendoMultiSelect();
        ConfigExposedPortsDataSource = ConfigExposedPortsWidget.dataSource;
        $("#ConfigTry").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
        $("#ConfigOpenStdIn").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
        $("#ConfigStdInOnce").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
        $("#ConfigEnv").kendoMultiSelect({});
        $("#ConfigCmd").kendoMultiSelect({});
        $("#ConfigArgsEscaped").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
        $("#ConfigHostImage").kendoAutoComplete(
          {
            dataSource: new kendo.data.DataSource({schema: {data: "Objects",model: {id: "id",fields: {"id": {type: "number",}, "ExposedPortsNumber": {type: "number",}, "ExposedPortsProtocol": {type: "string",}, "ExposedPortsShow": {type: "string",}, },},total: "Total",},serverPaging: true,transport: { create: { dataType: "json",type: "POST",url: "/static/test/create",},read: { dataType: "json",type: "GET",url: "/static/test/read",},},}),
            clearButton: false,
            dataTextField: "title",
            minLength: 1,
            filter: "isnotempty",
            dataBound: function(){
              var dataSource = new kendo.data.DataSource({
                data: fuse.search( getFormValue( 'id:Image' ) )
              });
              $('#ConfigHostImage').data('kendoAutoComplete').setDataSource( dataSource );
              $('#ConfigHostImage').data('kendoAutoComplete').dataSource.sync();

            }
          }
        );
        $("#ConfigVolumes").kendoMultiSelect({});
        $("#ConfigWorkingDir").addClass('k-textbox');
        $("#ConfigEntryPoint").kendoMultiSelect({});
        $("#ConfigNetworkDisabled").kendoMobileSwitch({offLabel: "No",onLabel: "Yes",});
        $("#ConfigMacAddress").addClass('k-textbox');
        $("#ConfigOnBuild").kendoMultiSelect({});
        $("#ConfigLabels").kendoMultiSelect({});
        $("#ConfigStopSignal").addClass('k-textbox');
        $("#ConfigStopTimeout").kendoNumericTextBox({format: "#s",});
        $("#ConfigShell").kendoMultiSelect({});
        ConfigExposedPortsWidget = $('#ConfigExposedPorts').getKendoMultiSelect();
        ConfigExposedPortsDataSource = ConfigExposedPortsWidget.dataSource;

      });

      function getData(){
        var ConfigExposedPorts = [];

        var data = ConfigExposedPortsDataSource.data();
        var value = getFormValue( 'id:ExposedPorts' );

        for( var kValue in value ){
          if( !value.hasOwnProperty( kValue ) ){
            continue;
          }

          for( var kData in data ){
            if( !data.hasOwnProperty( kData ) ){
              continue;
            }

            if( data[ kData ].id === value[ kValue ] ){
              ConfigExposedPorts.push( data[ kData ] );
            }

          }
        }

        console.log( 'ConfigHostName:', getFormValue( 'id:HostName' ) );
        console.log( 'data to send:', ConfigExposedPorts );
        console.log( 'data to send:', ConfigExposedPorts );
      }
    </script>
  </head>
<body>
<div id="example">
  <div class="k-content" id="spanCreateTemplateExposedPortsAddNewPort" style="width: 300px !important;"><div id="autoId_RxblpF780qkuSOJJ8Ws5C7iu27QC0W08"><label id="autoId_W3bzEMVjEKvGCeep4Ob16LbukPlEtI0b" style="width: 200px important!;" for="ConfigHostName">Host Name</label><input type="text" class="k-textbox" id="ConfigHostName" name="HostName"></div><div id="autoId_q4a8vlp1FPLJRMvP5rgzrgUvnl2sJ6q1"><label id="autoId_3FyAvvsUF4Go4celR8Os00RLkgcbcC3s" for="ConfigDomainName">Domain Name</label><input type="text" class="k-textbox" id="ConfigDomainName" name="DomainName"></div><div id="autoId_fbaSqbr88laon0OqEBSbEguEpozCQy5U"><label id="autoId_BdLx07UTwEJW2y1mYjq5ms1pzqmnFbeG" for="ConfigUser">User</label><input type="text" class="k-textbox" id="ConfigUser" name="User"></div><div id="autoId_4t0GEQuP8uaZLoTtp5bM9t28p0pniIep"><label id="autoId_k07xBWvoCsgLGPZZ64LncKVwSfH80M3L" for="ConfigAttachStdIn">Attach Std In</label><input type="text" id="ConfigAttachStdIn" name="AttachStdIn"></div><div id="autoId_AYFWwx8z881Ntez0gFr4gWqdEy3V6e0j"><label id="autoId_gXIirQDzdSqfdQvGpCS0oTMgXvbGJx7U" for="ConfigAttachStdOut">Attach Std Out</label><input type="checkbox" id="ConfigAttachStdOut" name="AttachStdOut"></div><div id="autoId_7TOf2pZBD6PEGrF1UFk8Kwf9HVcq1IMM"><label id="autoId_ePCh16FkW564t8yMpweE6BiJeiA7wLqf" for="ConfigAttachStdErr">Host Attach Std Err</label><input type="checkbox" id="ConfigAttachStdErr" name="AttachStdErr"></div><div id="autoId_0BtRXttf5Jue0senCFFm79dthlc9bBfL"><label id="autoId_3mKaJjCINAGfwFpade6BETssnKa0zjz7" for="ConfigExposedPorts">Exposed Ports</label><select id="ConfigExposedPorts" name="ExposedPorts"></select><div id="autoId_qAUmbDQyCARWbdAFxBDLgHgYtwPJDjTn"></div></div><div id="autoId_GeTrocAZEPRdbFZAz1yTjRWeVhXXz1JU"><label id="autoId_ewUPokhXaRepbMA37dUcIkQPci77hkMJ" for="ConfigTry">Try</label><input type="checkbox" id="ConfigTry" name="Try"></div><div id="autoId_pmMSbXD09iLZM8pVBtShVDGi0xN9PSwo"><label id="autoId_ijbKN7TBzel9zsv7IzH4uxzj30h5dU0L" for="ConfigOpenStdIn">Open Std In</label><input type="checkbox" id="ConfigOpenStdIn" name="OpenStdIn"></div><div id="autoId_RqOv0DO1MRwkBg0WaFB9ExMZqRAmcvak"><label id="autoId_nUOxAFrfmRcS4ygHxxI4c9pxezu6Ni6j" for="ConfigStdInOnce">Std In Once</label><input type="checkbox" id="ConfigStdInOnce" name="StdInOnce"></div><div id="autoId_EqVJgQJLjyM1bA0kUZrpsYMEUgdNLYrs"><label id="autoId_eBC1xlZG7TSRJxfa39M0hrFQUCSfaKvh" for="ConfigEnv">Env</label><select id="ConfigEnv" name="Env"></select></div><div id="autoId_DzDoXUBYjSZ52Bvd4kxIp4NJ6HQRD4X5"><label id="autoId_zxIOVzOTnUt8NdfdlUwmTGNx9yjSO5v0" for="ConfigCmd">Cmd</label><select id="ConfigCmd" name="Cmd"></select></div><div id="autoId_6IyT8p4ajK4Xs9vzSEfX02b1fjvf1RBg"><label id="autoId_cqYmWegDA1mlmyaKhjTa2F37yNqsGCFE" for="ConfigHealthCheck">Health Check</label></div><div id="autoId_5FU6NOJZB0ALH0HTCqCR3LXw5gOuVsSx"><label id="autoId_JDpXtBVHVguRoCjePFOVjQIWCfz9XSFl" for="ConfigArgsEscaped">Args Escaped</label><input type="checkbox" id="ConfigArgsEscaped" name="ArgsEscaped"></div><div id="autoId_u4DXJFwscvExJ7MjKjp8pRWu6k5ln6hV"><label id="autoId_4x5iCgmcAxII3dO0YowakBiwq90Gpj9k" for="ConfigImage">Image</label><input type="text" class="k-textbox" id="ConfigHostImage" name="Image"></div><div id="autoId_PugCVKBoINw9awmLDI4yO4sF6KPiGiHj"><label id="autoId_EnZi0H9FhnJG7Henx5KDLYTU3oRtzSM9" for="ConfigVolumes">Volumes</label><select id="ConfigVolumes" name="Volumes"></select></div><div id="autoId_pTV3tldnXFDDm35x2Z83AqIhKjzr7R31"><label id="autoId_CAUuXxPGDVmuJPe15B884Hj0IlOKaWgc" for="ConfigWorkingDir">Working Dir</label><input type="text" class="k-textbox" id="ConfigWorkingDir" name="WorkingDir"></div><div id="autoId_6ZX7k9p2LD2s45uCGOGsgrsJ5v4GUhyW"><label id="autoId_6c8BDwAWEG6or8ciPqJ0o0IK2vf0xJOr" for="ConfigEntryPoint">EntryPoint</label><select id="ConfigEntryPoint" name="EntryPoint"></select></div><div id="autoId_lPepQ0f6YOdXogPdK0VXh7PohkoFewIt"><label id="autoId_zmFcy4FvaqsvrmRfqsuwEd4DUYJL42n2" for="ConfigNetworkDisabled">Network Disabled</label><input type="checkbox" id="ConfigNetworkDisabled" name="NetworkDisabled"></div><div id="autoId_UCMXDAEuatR22uQuFlmiB05FO2I8h7EO"><label id="autoId_Zmf9enEA4GAOHuqp9TCe4z9RKjZkuo0j" for="ConfigMacAddress">Mac Address</label><input type="text" class="k-textbox" id="ConfigMacAddress" name="MacAddress"></div><div id="autoId_MXU5NysNDI5qRERE80J1kWZVQCIBbG9w"><label id="autoId_XudUKZbS0wcrTqVX0070lx6KciBQnwHB" for="ConfigOnBuild">On Build</label><select id="ConfigOnBuild" name="OnBuild"></select></div><div id="autoId_mDdSuGoxJ0joLgZpVqaDBXvmpSkDnmSo"><label id="autoId_94vBG9rBjXimEeHeqbX7tFkG3XJV3Rbd" for="ConfigLabels">Labels</label><select id="ConfigLabels" name="Labels"></select></div><div id="autoId_xDBvess7BcHqvvjTz5P6SGUEIe4HpUIJ"><label id="autoId_HrUyAQWdlGTTvMf9IZ3xOjpAANKaM7Kp" for="ConfigStopSignal">Stop Signal</label><input type="text" class="k-textbox" id="ConfigStopSignal" name="StopSignal"></div><div id="autoId_JDeOWoJMIdDVbc61uvkTA0l7yypCJxFa"><label id="autoId_n98UMVs8Yfme4UfdYchuNZHyIWROJPek" for="ConfigStopTimeout">Stop Timeout</label><input type="number" id="ConfigStopTimeout" name="StopTimeout"></div><div id="autoId_L323jgBybhRRo9nMx9Y4tVSIMAeixNPu"><label id="autoId_XcrryJ9wy0BJYlez3RRQM3s6sCFGxozn" for="ConfigShell">Shell</label><select id="ConfigShell" name="Shell"></select></div></div>
</div>
</body>
</html>